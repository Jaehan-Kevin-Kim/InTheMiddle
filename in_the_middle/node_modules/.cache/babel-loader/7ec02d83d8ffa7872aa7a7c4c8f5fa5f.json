{"ast":null,"code":"import _slicedToArray from\"F:/Self Study_Coding/Web/Portfolio/TeamProject/in_the_middle/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from\"react\";import\"./UploadItem.css\";import Header from\"../header/Header\";import{useHistory}from\"react-router-dom\";import{db,storage}from\"../../firebase\";import firebase from\"firebase\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var UploadItem=function UploadItem(_ref){var userId=_ref.userId;var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),itemName=_useState2[0],setItemName=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),itemCost=_useState4[0],setItemCost=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),itemRegion=_useState6[0],setItemRegion=_useState6[1];var _useState7=useState(),_useState8=_slicedToArray(_useState7,2),itemImg=_useState8[0],setItemImg=_useState8[1];var _useState9=useState(\"\"),_useState10=_slicedToArray(_useState9,2),itemDesc=_useState10[0],setItemDesc=_useState10[1];// const [redirect, setRedirect] = useState(false);\nvar history=useHistory();var _useState11=useState(null),_useState12=_slicedToArray(_useState11,2),image=_useState12[0],setImage=_useState12[1];var _useState13=useState(0),_useState14=_slicedToArray(_useState13,2),progress=_useState14[0],setProgress=_useState14[1];var handleChange=function handleChange(e){if(e.target.files[0]){setImage(e.target.files[0]);}};var handleUpload=function handleUpload(){var uploadTask=storage.ref(\"images/\".concat(image.name)).put(image);uploadTask.on(\"state_changed\",function(snapshot){//progress fuction ...\nvar progress=Math.round(snapshot.bytesTransferred/snapshot.totalBytes*100);setProgress(progress);},function(error){//error fuction ...\nconsole.log(error);alert(error.message);},function(){//complete fuction ...\nstorage.ref(\"images\").child(image.name).getDownloadURL().then(function(url){console.log(url);setItemImg(url);setProgress(0);setImage(null);});});};var onSubmit=function onSubmit(e){console.log(itemImg,itemName,itemCost,itemRegion,itemDesc);e.preventDefault();db.collection(\"items\").add({userId:userId,itemImg:itemImg,itemName:itemName,itemCost:itemCost,itemRegion:itemRegion,itemDesc:itemDesc,timestamp:firebase.firestore.FieldValue.serverTimestamp()});setItemName(\"\");setItemDesc(\"\");setItemRegion(\"\");setItemCost(\"\");setItemImg(\"\");history.push(\"/shop\");};return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"upload\",children:[/*#__PURE__*/_jsx(Header,{}),/*#__PURE__*/_jsxs(\"div\",{className:\"upload_form\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Upload Item\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"upload_input\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Item Name\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"item name\",onChange:function onChange(e){return setItemName(e.target.value);},value:itemName})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"upload_input\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Price\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"$000\",onChange:function onChange(e){return setItemCost(e.target.value);},value:itemCost})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"upload_input\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"City/Region\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"city and region\",onChange:function onChange(e){return setItemRegion(e.target.value);},value:itemRegion})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"imageUpload\",children:[/*#__PURE__*/_jsx(\"progress\",{className:\"imageUploadProgress\",value:progress,max:\"100\"}),/*#__PURE__*/_jsx(\"input\",{type:\"File\",className:\"file_input\",onChange:handleChange}),/*#__PURE__*/_jsx(\"button\",{className:\"btn_upload\",onClick:handleUpload,children:\"Upload\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"upload_description\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Description\"}),/*#__PURE__*/_jsx(\"textarea\",{name:\"\",id:\"\",cols:\"50\",rows:\"5\",onChange:function onChange(e){return setItemDesc(e.target.value);},value:itemDesc})]})]}),/*#__PURE__*/_jsx(\"button\",{className:\"btn_post\",onClick:onSubmit,children:\"Submit\"})]})});};export default UploadItem;","map":{"version":3,"sources":["F:/Self Study_Coding/Web/Portfolio/TeamProject/in_the_middle/src/components/uploadItem/UploadItem.js"],"names":["React","useState","Header","useHistory","db","storage","firebase","UploadItem","userId","itemName","setItemName","itemCost","setItemCost","itemRegion","setItemRegion","itemImg","setItemImg","itemDesc","setItemDesc","history","image","setImage","progress","setProgress","handleChange","e","target","files","handleUpload","uploadTask","ref","name","put","on","snapshot","Math","round","bytesTransferred","totalBytes","error","console","log","alert","message","child","getDownloadURL","then","url","onSubmit","preventDefault","collection","add","timestamp","firestore","FieldValue","serverTimestamp","push","value"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\r\nimport \"./UploadItem.css\";\r\nimport Header from \"../header/Header\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { db, storage } from \"../../firebase\";\r\nimport firebase from \"firebase\";\r\n\r\nconst UploadItem = ({ userId }) => {\r\n  const [itemName, setItemName] = useState(\"\");\r\n  const [itemCost, setItemCost] = useState(\"\");\r\n  const [itemRegion, setItemRegion] = useState(\"\");\r\n  const [itemImg, setItemImg] = useState();\r\n  const [itemDesc, setItemDesc] = useState(\"\");\r\n  // const [redirect, setRedirect] = useState(false);\r\n  const history = useHistory();\r\n\r\n  const [image, setImage] = useState(null);\r\n  const [progress, setProgress] = useState(0);\r\n\r\n  const handleChange = (e) => {\r\n    if (e.target.files[0]) {\r\n      setImage(e.target.files[0]);\r\n    }\r\n  };\r\n\r\n  const handleUpload = () => {\r\n    const uploadTask = storage.ref(`images/${image.name}`).put(image);\r\n    uploadTask.on(\r\n      \"state_changed\",\r\n      (snapshot) => {\r\n        //progress fuction ...\r\n        const progress = Math.round((snapshot.bytesTransferred / snapshot.totalBytes) * 100);\r\n        setProgress(progress);\r\n      },\r\n      (error) => {\r\n        //error fuction ...\r\n        console.log(error);\r\n        alert(error.message);\r\n      },\r\n      () => {\r\n        //complete fuction ...\r\n        storage\r\n          .ref(\"images\")\r\n          .child(image.name)\r\n          .getDownloadURL()\r\n          .then((url) => {\r\n            console.log(url);\r\n            setItemImg(url);\r\n            setProgress(0);\r\n            setImage(null);\r\n          });\r\n      }\r\n    );\r\n  };\r\n\r\n  const onSubmit = (e) => {\r\n    console.log(itemImg, itemName, itemCost, itemRegion, itemDesc);\r\n    e.preventDefault();\r\n\r\n    db.collection(\"items\").add({\r\n      userId,\r\n      itemImg,\r\n      itemName,\r\n      itemCost,\r\n      itemRegion,\r\n      itemDesc,\r\n      timestamp: firebase.firestore.FieldValue.serverTimestamp(),\r\n    });\r\n    setItemName(\"\");\r\n    setItemDesc(\"\");\r\n    setItemRegion(\"\");\r\n    setItemCost(\"\");\r\n    setItemImg(\"\");\r\n    history.push(\"/shop\");\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <div className='upload'>\r\n        <Header />\r\n        <div className='upload_form'>\r\n          <h1>Upload Item</h1>\r\n          <div className='upload_input'>\r\n            <h3>Item Name</h3>\r\n            <input\r\n              type='text'\r\n              placeholder='item name'\r\n              onChange={(e) => setItemName(e.target.value)}\r\n              value={itemName}\r\n            />\r\n          </div>\r\n          <div className='upload_input'>\r\n            <h3>Price</h3>\r\n            <input\r\n              type='text'\r\n              placeholder='$000'\r\n              onChange={(e) => setItemCost(e.target.value)}\r\n              value={itemCost}\r\n            />\r\n          </div>\r\n          <div className='upload_input'>\r\n            <h3>City/Region</h3>\r\n            <input\r\n              type='text'\r\n              placeholder='city and region'\r\n              onChange={(e) => setItemRegion(e.target.value)}\r\n              value={itemRegion}\r\n            />\r\n          </div>\r\n\r\n          {/* <div className='upload_image'>\r\n            <ImageUpload onClick={imageUploadFunction} />\r\n          </div> */}\r\n          <div className='imageUpload'>\r\n            <progress className='imageUploadProgress' value={progress} max='100' />\r\n\r\n            <input type='File' className='file_input' onChange={handleChange} />\r\n            <button className='btn_upload' onClick={handleUpload}>\r\n              Upload\r\n            </button>\r\n          </div>\r\n\r\n          <div className='upload_description'>\r\n            <h3>Description</h3>\r\n            <textarea\r\n              name=''\r\n              id=''\r\n              cols='50'\r\n              rows='5'\r\n              onChange={(e) => setItemDesc(e.target.value)}\r\n              value={itemDesc}\r\n            />\r\n          </div>\r\n        </div>\r\n\r\n        <button className='btn_post' onClick={onSubmit}>\r\n          Submit\r\n        </button>\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default UploadItem;\r\n"]},"metadata":{},"sourceType":"module"}